import java.util.ArrayList;
import java.util.Random;
import java.util.Stack;

public class Player {
	int mana, maxmana;
	Card king;
	Player enemy;
	ArrayList<Card> field;
	Stack<Card> dummy;
	ArrayList<Card> dek;
	ArrayList<Card> hand;
	Random random = new Random();

	Player() {
		dek = new ArrayList<Card>();
		field = new ArrayList<Card>();
		hand = new ArrayList<Card>();
		dummy = new Stack<Card>();
		makeKing();
	}

	private void makeKing() {
		king = new Card(0, 30, 0);
		field.add(king);
		king.attackable=0;
		king.maxattackable=0;
	}

	void newTurn() {
		maxmana++;
		mana = maxmana;
		hand.add(dummy.pop());
		for (Card card : field) {
			card.attackable = card.maxattackable;
		}
	}

	public void dieCharacter(Card card) {
		field.remove(card.index);
	}

	public void cardToHand(int size) {

		int ran = 0;
		for (int i = 0; i < size; i++) {
			do {
				ran = random.nextInt(29);
			} while (hasSameElement(hand, ran));
			hand.add(dek.get(ran));
		}
	}

	public boolean hasSameElement(ArrayList<Card> array, int value) {
		for (Card card : array) {
			if (card.index == value) {
				return true;
			}
		}
		return false;
	}

	public void changeFirstCard(int[] change) {
		cardToHand(change.length);
		int[] index = change;
		for (int i = change.length - 1; i > -1; i--) {
			index[i] = hand.get(change[i]).index;
		}
		for (int i : index) {
			removeCardByindex(i, hand);
		}
	}

	public void removeCardByindex(int index, ArrayList<Card> cards) {
		for (int i = 1; i < cards.size(); i++) {
			if (cards.get(i).index == index) {
				cards.remove(i-1);
			}
		}
	}

	public void printArrayList(ArrayList<Card> cards) {
		int i = 0;
		for (Card card : cards) {
			i++;
			System.out.println(String.format("(%d) %s[%d] (%d/%d)", i,
					card.name, card.cost, card.attack, card.defense));
		}
	}

	public void printDummy() {
		Card card;
		int size = dummy.size();
		for (int i = 0; i < size; i++) {
			card = dummy.pop();
			System.out.println(String.format("(%d) %s[%d] (%d/%d)", i,
					card.name, card.cost, card.attack, card.defense));
		}
	}
	
	public void printField(){
		Card card;
		int size = field.size();
		System.out.println("<필드>");
		for (int i = 0; i < size; i++) {
			card = field.get(i);
			System.out.println(String.format("(%d) %s (%d/%d) - %d/%d" , i,
					card.name, card.attack, card.defense, card.attackable/card.maxattackable));
		}
	}

	public void gameStart() {

	}

	public void dekToDummy() {
		for (Card card : hand) {
			removeCardByindex(card.index, dek);
		}
		int size = dek.size();
		int ran;
		Card card;

		for (int i = 0; i < size-1; i++) {
			ran = random.nextInt(dek.size() - 1);
			card = dek.get(ran);
			dummy.push(card);
			dek.remove(ran);
		}
		dummy.push(dek.get(0));
	}
}
